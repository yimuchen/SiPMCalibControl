<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SiPM Calibration Control Program: DRSContainer Class Reference</title>
<!-- Overriding the tabs css with our own -->
<!--link href="tabs.css" rel="stylesheet" type="text/css"/-->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<!--Explicitly calling the including the stuff required for search-->
<!--<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
-->
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SiPM Calibration Control Program
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classDRSContainer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DRSContainer Class Reference<div class="ingroups"><a class="el" href="group__hardware.html">Hardware Interface</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Here we provide a simpler interface to interface to initialize the DRS4 oscilloscope with the default settings required for SiPM data collection, as well as abstraction for the typical actions of pulse-like waveform aquisition and waveform summing, and status report. This is basically a stripped down and specialized method found in the DRS4 <a href="https://www.psi.ch/en/drs/software-download">reference program</a> that serves as the main reference of this file.</p>
<p>The collection will always be in single-shot mode, with no exposure the methods required to this setting. Notice that the DRS4 will not have a timeout for single shot mode once collection is requested, so the user will be responsible for making sure that the appropriate trigger is provided. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4c6ca3b3d3ecbc5200c536ac8962fdb0" id="r_a4c6ca3b3d3ecbc5200c536ac8962fdb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c6ca3b3d3ecbc5200c536ac8962fdb0">Init</a> ()</td></tr>
<tr class="memdesc:a4c6ca3b3d3ecbc5200c536ac8962fdb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializing the DRS4 container in single shot mode, and external triggers.  <br /></td></tr>
<tr class="separator:a4c6ca3b3d3ecbc5200c536ac8962fdb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee170806b4ab94d990fdfcbb1e1b6fd3" id="r_aee170806b4ab94d990fdfcbb1e1b6fd3"><td class="memItemLeft" align="right" valign="top"><a id="aee170806b4ab94d990fdfcbb1e1b6fd3" name="aee170806b4ab94d990fdfcbb1e1b6fd3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>StartCollect</b> ()</td></tr>
<tr class="memdesc:aee170806b4ab94d990fdfcbb1e1b6fd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starting a single-shot collection request. <br /></td></tr>
<tr class="separator:aee170806b4ab94d990fdfcbb1e1b6fd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9345ab991a7e9c26a4d8064ddafad685" id="r_a9345ab991a7e9c26a4d8064ddafad685"><td class="memItemLeft" align="right" valign="top"><a id="a9345ab991a7e9c26a4d8064ddafad685" name="a9345ab991a7e9c26a4d8064ddafad685"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ForceStop</b> ()</td></tr>
<tr class="memdesc:a9345ab991a7e9c26a4d8064ddafad685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forcing the collection to stop. <br /></td></tr>
<tr class="separator:a9345ab991a7e9c26a4d8064ddafad685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe43936afad4e00e5c3cea3d88896340" id="r_abe43936afad4e00e5c3cea3d88896340"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe43936afad4e00e5c3cea3d88896340">SetTrigger</a> (const unsigned channel, const double level, const unsigned direction, const double delay)</td></tr>
<tr class="memdesc:abe43936afad4e00e5c3cea3d88896340"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting the trigger.  <br /></td></tr>
<tr class="separator:abe43936afad4e00e5c3cea3d88896340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57caf2363876a5c99b9338a3e74ea301" id="r_a57caf2363876a5c99b9338a3e74ea301"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57caf2363876a5c99b9338a3e74ea301">SetRate</a> (const double frequency)</td></tr>
<tr class="memdesc:a57caf2363876a5c99b9338a3e74ea301"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting the data sampling rate.  <br /></td></tr>
<tr class="separator:a57caf2363876a5c99b9338a3e74ea301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a22af517cf74630c1e60ec26bbb66e6" id="r_a1a22af517cf74630c1e60ec26bbb66e6"><td class="memItemLeft" align="right" valign="top"><a id="a1a22af517cf74630c1e60ec26bbb66e6" name="a1a22af517cf74630c1e60ec26bbb66e6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetSamples</b> (const unsigned)</td></tr>
<tr class="memdesc:a1a22af517cf74630c1e60ec26bbb66e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting the number of values to store by default. <br /></td></tr>
<tr class="separator:a1a22af517cf74630c1e60ec26bbb66e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d8bc7ff4d3448c01381f92dad482b4e" id="r_a7d8bc7ff4d3448c01381f92dad482b4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d8bc7ff4d3448c01381f92dad482b4e">WaitReady</a> ()</td></tr>
<tr class="memdesc:a7d8bc7ff4d3448c01381f92dad482b4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waiting for the DRS4 to be ready for data transfer.  <br /></td></tr>
<tr class="separator:a7d8bc7ff4d3448c01381f92dad482b4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7fdbaabf1241621b75b5d989a29464e" id="r_ad7fdbaabf1241621b75b5d989a29464e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7fdbaabf1241621b75b5d989a29464e">GetWaveform</a> (const unsigned channel)</td></tr>
<tr class="memdesc:ad7fdbaabf1241621b75b5d989a29464e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returning the last collected waveform as an array of floats.  <br /></td></tr>
<tr class="separator:ad7fdbaabf1241621b75b5d989a29464e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109129be88b319cf5e34388e1420cf98" id="r_a109129be88b319cf5e34388e1420cf98"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a109129be88b319cf5e34388e1420cf98">GetTimeArray</a> (const unsigned channel)</td></tr>
<tr class="memdesc:a109129be88b319cf5e34388e1420cf98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the time slice array for precision timing of a specific channel.  <br /></td></tr>
<tr class="separator:a109129be88b319cf5e34388e1420cf98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a41f790e207c349b30825b13905d8c8" id="r_a2a41f790e207c349b30825b13905d8c8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a41f790e207c349b30825b13905d8c8">WaveformStr</a> (const unsigned channel)</td></tr>
<tr class="memdesc:a2a41f790e207c349b30825b13905d8c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returning the latest collected waveform at specified channel in a hex-string format.  <br /></td></tr>
<tr class="separator:a2a41f790e207c349b30825b13905d8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7314bbdbd6a1b3dc380679f2db30dd38" id="r_a7314bbdbd6a1b3dc380679f2db30dd38"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7314bbdbd6a1b3dc380679f2db30dd38">WaveformSum</a> (const unsigned channel, const unsigned intstart=-1, const unsigned intstop=-1, const unsigned pedstart=-1, const unsigned pedstop=-1)</td></tr>
<tr class="memdesc:a7314bbdbd6a1b3dc380679f2db30dd38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returning the waveform of a given channel summed over the integration window, with a pedestal subtraction if needed.  <br /></td></tr>
<tr class="separator:a7314bbdbd6a1b3dc380679f2db30dd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20718f6583a34aa81409f6a62e11aaa0" id="r_a20718f6583a34aa81409f6a62e11aaa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20718f6583a34aa81409f6a62e11aaa0">DumpBuffer</a> (const unsigned channel)</td></tr>
<tr class="memdesc:a20718f6583a34aa81409f6a62e11aaa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Printing the latest buffer collection results on the screen for debugging.  <br /></td></tr>
<tr class="separator:a20718f6583a34aa81409f6a62e11aaa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb8f913db7deb7377f7899209f484bc" id="r_adeb8f913db7deb7377f7899209f484bc"><td class="memItemLeft" align="right" valign="top"><a id="adeb8f913db7deb7377f7899209f484bc" name="adeb8f913db7deb7377f7899209f484bc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>TimeSlice</b> (const unsigned channel)</td></tr>
<tr class="separator:adeb8f913db7deb7377f7899209f484bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4f73a736ee08f7a6de87650b865085b" id="r_af4f73a736ee08f7a6de87650b865085b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4f73a736ee08f7a6de87650b865085b">RunCalib</a> ()</td></tr>
<tr class="memdesc:af4f73a736ee08f7a6de87650b865085b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple wrapper function for running the calibration at the current settings.  <br /></td></tr>
<tr class="separator:af4f73a736ee08f7a6de87650b865085b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73272346abe0aa7ab5a23aab40ac2b5" id="r_af73272346abe0aa7ab5a23aab40ac2b5"><td class="memItemLeft" align="right" valign="top"><a id="af73272346abe0aa7ab5a23aab40ac2b5" name="af73272346abe0aa7ab5a23aab40ac2b5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>TriggerChannel</b> ()</td></tr>
<tr class="memdesc:af73272346abe0aa7ab5a23aab40ac2b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the trigger channel stored in object. <br /></td></tr>
<tr class="separator:af73272346abe0aa7ab5a23aab40ac2b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4462d65250115f908f060355561b35" id="r_afe4462d65250115f908f060355561b35"><td class="memItemLeft" align="right" valign="top"><a id="afe4462d65250115f908f060355561b35" name="afe4462d65250115f908f060355561b35"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>TriggerDirection</b> ()</td></tr>
<tr class="memdesc:afe4462d65250115f908f060355561b35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the trigger direction stored in object. <br /></td></tr>
<tr class="separator:afe4462d65250115f908f060355561b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ed753b84d94531ebd44153b06cd122" id="r_a87ed753b84d94531ebd44153b06cd122"><td class="memItemLeft" align="right" valign="top"><a id="a87ed753b84d94531ebd44153b06cd122" name="a87ed753b84d94531ebd44153b06cd122"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>TriggerDelay</b> ()</td></tr>
<tr class="memdesc:a87ed753b84d94531ebd44153b06cd122"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the trigger delay in the DRS instance. <br /></td></tr>
<tr class="separator:a87ed753b84d94531ebd44153b06cd122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513ec3544a5e0822f6f99a46f93f67c0" id="r_a513ec3544a5e0822f6f99a46f93f67c0"><td class="memItemLeft" align="right" valign="top"><a id="a513ec3544a5e0822f6f99a46f93f67c0" name="a513ec3544a5e0822f6f99a46f93f67c0"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>TriggerLevel</b> ()</td></tr>
<tr class="memdesc:a513ec3544a5e0822f6f99a46f93f67c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the trigger level stored in object. <br /></td></tr>
<tr class="separator:a513ec3544a5e0822f6f99a46f93f67c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a618d907683c5210b797e5295ca6d6a19" id="r_a618d907683c5210b797e5295ca6d6a19"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a618d907683c5210b797e5295ca6d6a19">GetRate</a> ()</td></tr>
<tr class="memdesc:a618d907683c5210b797e5295ca6d6a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the true sampling rate.  <br /></td></tr>
<tr class="separator:a618d907683c5210b797e5295ca6d6a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcdacf6a5a60ddf5a66b50e03f1bba8" id="r_a5dcdacf6a5a60ddf5a66b50e03f1bba8"><td class="memItemLeft" align="right" valign="top"><a id="a5dcdacf6a5a60ddf5a66b50e03f1bba8" name="a5dcdacf6a5a60ddf5a66b50e03f1bba8"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>GetSamples</b> ()</td></tr>
<tr class="memdesc:a5dcdacf6a5a60ddf5a66b50e03f1bba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getting the number of sample to store. <br /></td></tr>
<tr class="separator:a5dcdacf6a5a60ddf5a66b50e03f1bba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289816cd13fccf79f470acdea240b64f" id="r_a289816cd13fccf79f470acdea240b64f"><td class="memItemLeft" align="right" valign="top"><a id="a289816cd13fccf79f470acdea240b64f" name="a289816cd13fccf79f470acdea240b64f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>IsAvailable</b> () const</td></tr>
<tr class="memdesc:a289816cd13fccf79f470acdea240b64f"><td class="mdescLeft">&#160;</td><td class="mdescRight">True/False flag for whether the DRS4 is available for operation. <br /></td></tr>
<tr class="separator:a289816cd13fccf79f470acdea240b64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabfe7251199b73071a4de6aec90e584d" id="r_aabfe7251199b73071a4de6aec90e584d"><td class="memItemLeft" align="right" valign="top"><a id="aabfe7251199b73071a4de6aec90e584d" name="aabfe7251199b73071a4de6aec90e584d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>IsReady</b> ()</td></tr>
<tr class="memdesc:aabfe7251199b73071a4de6aec90e584d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple check for whether data collection has finished. <br /></td></tr>
<tr class="separator:aabfe7251199b73071a4de6aec90e584d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e56310e3df4c799fde0c0c4d0fa4d6" id="r_a63e56310e3df4c799fde0c0c4d0fa4d6"><td class="memItemLeft" align="right" valign="top"><a id="a63e56310e3df4c799fde0c0c4d0fa4d6" name="a63e56310e3df4c799fde0c0c4d0fa4d6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>CheckAvailable</b> () const</td></tr>
<tr class="memdesc:a63e56310e3df4c799fde0c0c4d0fa4d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checking that a DRS4 is available for operation. Throw exception if not. <br /></td></tr>
<tr class="separator:a63e56310e3df4c799fde0c0c4d0fa4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0dd53d5af26f2f64799062afb9f7b58e" id="r_a0dd53d5af26f2f64799062afb9f7b58e"><td class="memItemLeft" align="right" valign="top"><a id="a0dd53d5af26f2f64799062afb9f7b58e" name="a0dd53d5af26f2f64799062afb9f7b58e"></a>
static <a class="el" href="classDRSContainer.html">DRSContainer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>instance</b> ()</td></tr>
<tr class="separator:a0dd53d5af26f2f64799062afb9f7b58e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b38dad849f11795438eb9d2cdfef6f6" id="r_a7b38dad849f11795438eb9d2cdfef6f6"><td class="memItemLeft" align="right" valign="top"><a id="a7b38dad849f11795438eb9d2cdfef6f6" name="a7b38dad849f11795438eb9d2cdfef6f6"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>make_instance</b> ()</td></tr>
<tr class="separator:a7b38dad849f11795438eb9d2cdfef6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf81ca3c87d7cdffd3ec139946a43b3d" id="r_abf81ca3c87d7cdffd3ec139946a43b3d"><td class="memItemLeft" align="right" valign="top"><a id="abf81ca3c87d7cdffd3ec139946a43b3d" name="abf81ca3c87d7cdffd3ec139946a43b3d"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>close_instance</b> ()</td></tr>
<tr class="separator:abf81ca3c87d7cdffd3ec139946a43b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a5555786f55646c42bd988fe5c66ec091" id="r_a5555786f55646c42bd988fe5c66ec091"><td class="memItemLeft" align="right" valign="top"><a id="a5555786f55646c42bd988fe5c66ec091" name="a5555786f55646c42bd988fe5c66ec091"></a>
static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><b>DeviceName</b> = # <a class="el" href="classDRSContainer.html">DRSContainer</a></td></tr>
<tr class="separator:a5555786f55646c42bd988fe5c66ec091"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8ab0d28fd1821c1479809ff4dd0fc69d" id="r_a8ab0d28fd1821c1479809ff4dd0fc69d"><td class="memItemLeft" align="right" valign="top"><a id="a8ab0d28fd1821c1479809ff4dd0fc69d" name="a8ab0d28fd1821c1479809ff4dd0fc69d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DRSContainer</b> (const <a class="el" href="classDRSContainer.html">DRSContainer</a> &amp;)=delete</td></tr>
<tr class="separator:a8ab0d28fd1821c1479809ff4dd0fc69d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae690f87f58dc7565ab8f779f537a53e9" id="r_ae690f87f58dc7565ab8f779f537a53e9"><td class="memItemLeft" align="right" valign="top"><a id="ae690f87f58dc7565ab8f779f537a53e9" name="ae690f87f58dc7565ab8f779f537a53e9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DRSContainer</b> (const <a class="el" href="classDRSContainer.html">DRSContainer</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:ae690f87f58dc7565ab8f779f537a53e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abe1a2678eff14308d4df9674a5db0a0c" id="r_abe1a2678eff14308d4df9674a5db0a0c"><td class="memItemLeft" align="right" valign="top"><a id="abe1a2678eff14308d4df9674a5db0a0c" name="abe1a2678eff14308d4df9674a5db0a0c"></a>
std::unique_ptr&lt; DRS &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>drs</b></td></tr>
<tr class="separator:abe1a2678eff14308d4df9674a5db0a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef226b110a574f46d9fe75dd4a3b4af" id="r_afef226b110a574f46d9fe75dd4a3b4af"><td class="memItemLeft" align="right" valign="top"><a id="afef226b110a574f46d9fe75dd4a3b4af" name="afef226b110a574f46d9fe75dd4a3b4af"></a>
DRSBoard *&#160;</td><td class="memItemRight" valign="bottom"><b>board</b></td></tr>
<tr class="separator:afef226b110a574f46d9fe75dd4a3b4af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8017b34a5388359abfe87e55029dd67" id="r_af8017b34a5388359abfe87e55029dd67"><td class="memItemLeft" align="right" valign="top"><a id="af8017b34a5388359abfe87e55029dd67" name="af8017b34a5388359abfe87e55029dd67"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>triggerlevel</b></td></tr>
<tr class="separator:af8017b34a5388359abfe87e55029dd67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8bd6210d5fe8828bd25b129e0c3de47" id="r_ae8bd6210d5fe8828bd25b129e0c3de47"><td class="memItemLeft" align="right" valign="top"><a id="ae8bd6210d5fe8828bd25b129e0c3de47" name="ae8bd6210d5fe8828bd25b129e0c3de47"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>triggerchannel</b></td></tr>
<tr class="separator:ae8bd6210d5fe8828bd25b129e0c3de47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38ff6dc8a89cf3e0ab98dcb1674abed" id="r_ad38ff6dc8a89cf3e0ab98dcb1674abed"><td class="memItemLeft" align="right" valign="top"><a id="ad38ff6dc8a89cf3e0ab98dcb1674abed" name="ad38ff6dc8a89cf3e0ab98dcb1674abed"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>triggerdirection</b></td></tr>
<tr class="separator:ad38ff6dc8a89cf3e0ab98dcb1674abed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaf709a1d945ec1589616e79f51fd3d6" id="r_aeaf709a1d945ec1589616e79f51fd3d6"><td class="memItemLeft" align="right" valign="top"><a id="aeaf709a1d945ec1589616e79f51fd3d6" name="aeaf709a1d945ec1589616e79f51fd3d6"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>triggerdelay</b></td></tr>
<tr class="separator:aeaf709a1d945ec1589616e79f51fd3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf3bb01428bf91013e2ecac211e32b5d" id="r_adf3bb01428bf91013e2ecac211e32b5d"><td class="memItemLeft" align="right" valign="top"><a id="adf3bb01428bf91013e2ecac211e32b5d" name="adf3bb01428bf91013e2ecac211e32b5d"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>samples</b></td></tr>
<tr class="separator:adf3bb01428bf91013e2ecac211e32b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a1acc3db18ada576a530761b24a3c9dcd" id="r_a1acc3db18ada576a530761b24a3c9dcd"><td class="memItemLeft" align="right" valign="top"><a id="a1acc3db18ada576a530761b24a3c9dcd" name="a1acc3db18ada576a530761b24a3c9dcd"></a>
static std::unique_ptr&lt; <a class="el" href="classDRSContainer.html">DRSContainer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_instance</b> = nullptr</td></tr>
<tr class="separator:a1acc3db18ada576a530761b24a3c9dcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a20718f6583a34aa81409f6a62e11aaa0" name="a20718f6583a34aa81409f6a62e11aaa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20718f6583a34aa81409f6a62e11aaa0">&#9670;&#160;</a></span>DumpBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DRSContainer::DumpBuffer </td>
          <td>(</td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>channel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This will be the only time where the timing results will be displayed. The waveform summation will not use the timing information. Also, as this is strictly meant for runtime debugging, the output will not use the common logging output. </p>

</div>
</div>
<a id="a618d907683c5210b797e5295ca6d6a19" name="a618d907683c5210b797e5295ca6d6a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a618d907683c5210b797e5295ca6d6a19">&#9670;&#160;</a></span>GetRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double DRSContainer::GetRate </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>double </dd></dl>

</div>
</div>
<a id="a109129be88b319cf5e34388e1420cf98" name="a109129be88b319cf5e34388e1420cf98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109129be88b319cf5e34388e1420cf98">&#9670;&#160;</a></span>GetTimeArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; float &gt; DRSContainer::GetTimeArray </td>
          <td>(</td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>channel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notice that this only changes once a timing calibration is performed, so it can be reused between calibration runs. However, it is found that the timing variation from a regular interval deducted from the sample frequency is small enough that this function is only included for the sake of debugging and display. The timing returned is in units of nanoseconds. </p>

</div>
</div>
<a id="ad7fdbaabf1241621b75b5d989a29464e" name="ad7fdbaabf1241621b75b5d989a29464e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7fdbaabf1241621b75b5d989a29464e">&#9670;&#160;</a></span>GetWaveform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; float &gt; DRSContainer::GetWaveform </td>
          <td>(</td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>channel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a lowest level interface with the DRS4 API, and so no conversion will be returned here, the return vector will always be a fixed length long (2048). Conversion should be handled by the other functions.</p>
<p>Notice that this function will wait indefinitely for the board to finish data collection. So the user is responsible for making sure that the appropriate trigger signal is sent. </p>

</div>
</div>
<a id="a4c6ca3b3d3ecbc5200c536ac8962fdb0" name="a4c6ca3b3d3ecbc5200c536ac8962fdb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c6ca3b3d3ecbc5200c536ac8962fdb0">&#9670;&#160;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DRSContainer::Init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As the reference program is a bit verbose, here we reduce the input to what is needed for out single-shot operation. We also include explicit settings commented out to make sure future development doesn't open certain settings that is already known to cause issues by accident. </p>

</div>
</div>
<a id="af4f73a736ee08f7a6de87650b865085b" name="af4f73a736ee08f7a6de87650b865085b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4f73a736ee08f7a6de87650b865085b">&#9670;&#160;</a></span>RunCalib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DRSContainer::RunCalib </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This C++ function will assume that the DRS is in a correct configuration to be calibrated (all inputs disconnected). Additional user instructions will be handled by the python part. </p>

</div>
</div>
<a id="a57caf2363876a5c99b9338a3e74ea301" name="a57caf2363876a5c99b9338a3e74ea301"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57caf2363876a5c99b9338a3e74ea301">&#9670;&#160;</a></span>SetRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DRSContainer::SetRate </td>
          <td>(</td>
          <td class="paramtype">const double</td>          <td class="paramname"><span class="paramname"><em>x</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notice that this will not be the real sampling rate, the DRS will automatically round to the closest available value. </p>

</div>
</div>
<a id="abe43936afad4e00e5c3cea3d88896340" name="abe43936afad4e00e5c3cea3d88896340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe43936afad4e00e5c3cea3d88896340">&#9670;&#160;</a></span>SetTrigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DRSContainer::SetTrigger </td>
          <td>(</td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>channel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double</td>          <td class="paramname"><span class="paramname"><em>level</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>direction</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double</td>          <td class="paramname"><span class="paramname"><em>delay</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For the channel, use 4 to set to external trigger. The level and direction will only be used if the trigger channel is set to one of the readout channels. Delay will always be in units of nanoseconds. </p>

</div>
</div>
<a id="a7d8bc7ff4d3448c01381f92dad482b4e" name="a7d8bc7ff4d3448c01381f92dad482b4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d8bc7ff4d3448c01381f92dad482b4e">&#9670;&#160;</a></span>WaitReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DRSContainer::WaitReady </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function will suspend the thread indefinitely until the DRS4 is ready for data transfer operation. After the suspension, the data will always be flushed to the main buffer (as this main program is only ever intended to be done with the DRS4 running in single-shot mode). </p>

</div>
</div>
<a id="a2a41f790e207c349b30825b13905d8c8" name="a2a41f790e207c349b30825b13905d8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a41f790e207c349b30825b13905d8c8">&#9670;&#160;</a></span>WaveformStr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string DRSContainer::WaveformStr </td>
          <td>(</td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>channel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Each waveforma value is converted to a (signed) 16bit integer with 1bit representing 0.1mV. The 16bit integer is then converted into hex-string format and returned. </p>

</div>
</div>
<a id="a7314bbdbd6a1b3dc380679f2db30dd38" name="a7314bbdbd6a1b3dc380679f2db30dd38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7314bbdbd6a1b3dc380679f2db30dd38">&#9670;&#160;</a></span>WaveformSum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double DRSContainer::WaveformSum </td>
          <td>(</td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>channel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>_intstart</em><span class="paramdefsep"> = </span><span class="paramdefval">-1</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>_intstop</em><span class="paramdefsep"> = </span><span class="paramdefval">-1</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>_pedstart</em><span class="paramdefsep"> = </span><span class="paramdefval">-1</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned</td>          <td class="paramname"><span class="paramname"><em>_pedstop</em><span class="paramdefsep"> = </span><span class="paramdefval">-1</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The integration window and pedestal window is specified by sample indices, so you will need to calculate the required window from the timing information. The return will be single double for the waveform area in units of mV x ns. Notice that timing information will <em>NOT</em> be used, as we simply assuming perfect temporal spacing between the sampled values.</p>
<p>In case you do not want to to perform pedestal subtraction, the starting the stopping indices to the same value. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/github/workspace/src/<a class="el" href="drs_8hpp_source.html">drs.hpp</a></li>
<li>/github/workspace/src/<a class="el" href="drs_8cc.html">drs.cc</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/>
  <address class="footer">
    <small>
    Generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.10.0
    </small>
  </address>
  <address class="footer">
    <small>
    Source code hosted on<a href="http://github.com">GitHub</a>
    </small>
  </address>
  <address class="footer">
    <small id="debugger">
    Debug:
    </small>
  </address>
<!-- custom Javascript stuff -->
  <script type="text/javascript" src="customjs/summary.js"></script>
</body>
</html>
